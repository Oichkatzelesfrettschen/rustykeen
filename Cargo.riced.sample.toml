# Cargo.riced.sample.toml — target 2026 dependency + feature map (reference only)
#
# This is NOT the active workspace manifest. It captures the “riced” ecosystem
# in a feature-gated form, so we can adopt incrementally without losing the plan.
#
# Active manifest: `Cargo.toml`

[workspace]
members = ["kenken-core", "kenken-solver"]
resolver = "2"

[workspace.package]
edition = "2024"

[workspace.dependencies]
# Core correctness
smallvec = "1"
thiserror = "1"

# Optional serialization / formats
serde = { version = "1", features = ["derive"], optional = true }
serde_json = { version = "1", optional = true }
toml = { version = "0.8", optional = true }

# Telemetry
tracing = { version = "0.1", optional = true }
tracing-subscriber = { version = "0.3", optional = true }
tracing-tracy = { version = "0.11", optional = true }

# Blue Smoke performance core
dlx_rs = { version = "1", optional = true }          # crate id is dlx-rs on crates.io
bitvec = { version = "1", optional = true }
mimalloc = { version = "0.1", optional = true }
bumpalo = { version = "3", optional = true }
wide = { version = "0.7", optional = true }
soa_derive = { version = "0.13", optional = true }
likely_stable = { version = "0.1", optional = true }
static_assertions = { version = "1", optional = true }

# Hyper-scale logic
rayon = { version = "1", optional = true }
parking_lot = { version = "0.12", optional = true }
ringbuf = { version = "0.4", optional = true }
dashmap = { version = "5", optional = true }
nohash-hasher = { version = "0.2", optional = true }
fxhash = { version = "0.2", optional = true }
rand_pcg = { version = "0.3", optional = true }
fixed = { version = "1", optional = true }
num-integer = { version = "0.1", optional = true }

# Zero-overhead architecture
rkyv = { version = "0.7", optional = true }
crux_core = { version = "0.12", optional = true }
uniffi = { version = "0.24", optional = true }
rust-embed = { version = "8", optional = true }
bytemuck = { version = "1", optional = true }
anyhow = { version = "1", optional = true }

# Deep vision tooling
criterion = { version = "0.5", optional = true }
ratatui = { version = "0.26", optional = true }
varisat = { version = "0.2", optional = true }
z3 = { version = "0.12", optional = true }
kani = { version = "0.50", optional = true }
proptest = { version = "1", optional = true }
bolero = { version = "0.10", optional = true }
nom = { version = "7", optional = true }

[workspace.features]
# Keep defaults minimal; each crate should declare its own defaults too.
default = []

# Capability groups (map to docs/dependency_matrix.md)
serde = ["dep:serde"]
json = ["dep:serde_json", "serde"]
toml = ["dep:toml", "serde"]

telemetry-tracing = ["dep:tracing"]
telemetry-subscriber = ["dep:tracing-subscriber", "telemetry-tracing"]
telemetry-tracy = ["dep:tracing-tracy", "telemetry-tracing"]

solver-dlx = ["dep:dlx_rs"]
core-bitvec = ["dep:bitvec"]
alloc-mimalloc = ["dep:mimalloc"]
alloc-bumpalo = ["dep:bumpalo"]
simd-wide = ["dep:wide"]
layout-soa = ["dep:soa_derive"]
perf-likely = ["dep:likely_stable"]
perf-assertions = ["dep:static_assertions"]

parallel-rayon = ["dep:rayon"]
sync-parking_lot = ["dep:parking_lot"]
telemetry-ringbuf = ["dep:ringbuf"]
cache-dashmap = ["dep:dashmap"]
hash-fast = ["dep:nohash-hasher", "dep:fxhash"]
rng-pcg = ["dep:rand_pcg"]
math-fixed = ["dep:fixed"]
math-num-integer = ["dep:num-integer"]

io-rkyv = ["dep:rkyv"]
ui-crux = ["dep:crux_core"]
ffi-uniffi = ["dep:uniffi"]
assets-embed = ["dep:rust-embed"]
bytes-bytemuck = ["dep:bytemuck"]
errors-anyhow = ["dep:anyhow"]

bench-criterion = ["dep:criterion"]
dev-tui = ["dep:ratatui"]
sat-varisat = ["dep:varisat"]
smt-z3 = ["dep:z3"]
verify-kani = ["dep:kani"]
fuzz = ["dep:proptest", "dep:bolero"]
io-nom = ["dep:nom"]

